!function(I,g){if("object"==typeof exports&&"object"==typeof module)module.exports=g();else if("function"==typeof define&&define.amd)define([],g);else{var t=g();for(var C in t)("object"==typeof exports?exports:I)[C]=t[C]}}(window,function(){return function(I){var g={};function t(C){if(g[C])return g[C].exports;var n=g[C]={i:C,l:!1,exports:{}};return I[C].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=I,t.c=g,t.d=function(I,g,C){t.o(I,g)||Object.defineProperty(I,g,{enumerable:!0,get:C})},t.r=function(I){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},t.t=function(I,g){if(1&g&&(I=t(I)),8&g)return I;if(4&g&&"object"==typeof I&&I&&I.__esModule)return I;var C=Object.create(null);if(t.r(C),Object.defineProperty(C,"default",{enumerable:!0,value:I}),2&g&&"string"!=typeof I)for(var n in I)t.d(C,n,function(g){return I[g]}.bind(null,n));return C},t.n=function(I){var g=I&&I.__esModule?function(){return I.default}:function(){return I};return t.d(g,"a",g),g},t.o=function(I,g){return Object.prototype.hasOwnProperty.call(I,g)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (factory) {\r\n    if ( true && typeof module.exports === "object") {\r\n        var v = factory(__webpack_require__(1), exports);\r\n        if (v !== undefined) module.exports = v;\r\n    }\r\n    else if (true) {\r\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === \'function\' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n    }\r\n})(function (require, exports) {\r\n    "use strict";\r\n    Object.defineProperty(exports, "__esModule", { value: true });\r\n    exports.V2Init = exports.Vcomposition2 = void 0;\r\n    class Vcomposition2 {\r\n        constructor(vm) {\r\n            this.vm = vm;\r\n            this.root = this.vm.root;\r\n        }\r\n        onCreate(callback) {\r\n            this.vm.$on("hook:created", () => {\r\n                const methods = callback();\r\n                methods && Object.assign(this.vm, methods);\r\n            });\r\n        }\r\n        onMounted(callback) {\r\n            this.vm.$on("hook:mounted", () => {\r\n                const methods = callback();\r\n                methods && Object.assign(this.vm, methods);\r\n            });\r\n        }\r\n        onUnMounted(callback) {\r\n            this.vm.$on("hook:beforeDestroy", callback);\r\n        }\r\n        onDestroyed(callback) {\r\n            this.vm.$on("hook:destroyed", callback);\r\n        }\r\n        onWatch(exp, cb, options) {\r\n            return this.vm.$watch("root." + exp, cb, options);\r\n        }\r\n        onComputed(key, callback) {\r\n            this.vm.$watch(callback, function (newVal) {\r\n                this.$set(this.cd, key, newVal);\r\n            }, {\r\n                deep: true,\r\n                immediate: true,\r\n            });\r\n        }\r\n        /**\r\n         * @description\r\n         * Object.assign会把Object.defineProperties的getset合并没\r\n         * 最终挂载到this上的属性基本是响应式也会没有getset\r\n         * Object.assign(this.vm,this.vm.$options._base.observable(value))  xxxx 不行\r\n         */\r\n        ref(key, value) {\r\n            this.vm.$set(this.vm.root, key, value);\r\n        }\r\n        reactive(value) {\r\n            Object.keys(value).forEach((v) => {\r\n                this.ref(v, value[v]);\r\n            });\r\n        }\r\n        use(callback) {\r\n            let callbackList = Array.isArray(callback) ? callback : [callback];\r\n            callbackList.forEach(f => {\r\n                const methods = f.call(this.vm, this, this.root);\r\n                methods && Object.assign(this.vm, methods);\r\n            });\r\n            return this;\r\n        }\r\n    }\r\n    exports.Vcomposition2 = Vcomposition2;\r\n    const V2Init = (vmOptions) => {\r\n        // 但是vue是在有实例的时候去执行的data\r\n        //会给data传入当前的vue实例,而我这里还没有实例,也就是说data里的对象不能写this\r\n        const optionsData = vmOptions.data ? vmOptions.data() : {};\r\n        vmOptions.data = function () {\r\n            return {\r\n                ...optionsData,\r\n                root: {},\r\n                cd: {},\r\n            };\r\n        };\r\n        return vmOptions;\r\n    };\r\n    exports.V2Init = V2Init;\r\n});\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHM/NzFiZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLFFBQVEsS0FBMEI7QUFDbEMsd0JBQXdCLHNCQUFPO0FBQy9CO0FBQ0E7QUFDQSxhQUFhLElBQTBDO0FBQ3ZELFFBQVEsaUNBQU8sQ0FBQyxtQkFBUyxFQUFFLE9BQVMsQ0FBQyxvQ0FBRSxPQUFPO0FBQUE7QUFBQTtBQUFBLG9HQUFDO0FBQy9DO0FBQ0EsQ0FBQztBQUNEO0FBQ0Esa0RBQWtELGNBQWM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcbiAgICBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICB2YXIgdiA9IGZhY3RvcnkocmVxdWlyZSwgZXhwb3J0cyk7XHJcbiAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgbW9kdWxlLmV4cG9ydHMgPSB2O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoW1wicmVxdWlyZVwiLCBcImV4cG9ydHNcIl0sIGZhY3RvcnkpO1xyXG4gICAgfVxyXG59KShmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiAgICBleHBvcnRzLlYySW5pdCA9IGV4cG9ydHMuVmNvbXBvc2l0aW9uMiA9IHZvaWQgMDtcclxuICAgIGNsYXNzIFZjb21wb3NpdGlvbjIge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHZtKSB7XHJcbiAgICAgICAgICAgIHRoaXMudm0gPSB2bTtcclxuICAgICAgICAgICAgdGhpcy5yb290ID0gdGhpcy52bS5yb290O1xyXG4gICAgICAgIH1cclxuICAgICAgICBvbkNyZWF0ZShjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLnZtLiRvbihcImhvb2s6Y3JlYXRlZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRob2RzID0gY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIG1ldGhvZHMgJiYgT2JqZWN0LmFzc2lnbih0aGlzLnZtLCBtZXRob2RzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9uTW91bnRlZChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLnZtLiRvbihcImhvb2s6bW91bnRlZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRob2RzID0gY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIG1ldGhvZHMgJiYgT2JqZWN0LmFzc2lnbih0aGlzLnZtLCBtZXRob2RzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9uVW5Nb3VudGVkKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudm0uJG9uKFwiaG9vazpiZWZvcmVEZXN0cm95XCIsIGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb25EZXN0cm95ZWQoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy52bS4kb24oXCJob29rOmRlc3Ryb3llZFwiLCBjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9uV2F0Y2goZXhwLCBjYiwgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy52bS4kd2F0Y2goXCJyb290LlwiICsgZXhwLCBjYiwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9uQ29tcHV0ZWQoa2V5LCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLnZtLiR3YXRjaChjYWxsYmFjaywgZnVuY3Rpb24gKG5ld1ZhbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuY2QsIGtleSwgbmV3VmFsKTtcclxuICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgZGVlcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGltbWVkaWF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIE9iamVjdC5hc3NpZ27kvJrmiopPYmplY3QuZGVmaW5lUHJvcGVydGllc+eahGdldHNldOWQiOW5tuayoVxyXG4gICAgICAgICAqIOacgOe7iOaMgui9veWIsHRoaXPkuIrnmoTlsZ7mgKfln7rmnKzmmK/lk43lupTlvI/kuZ/kvJrmsqHmnIlnZXRzZXRcclxuICAgICAgICAgKiBPYmplY3QuYXNzaWduKHRoaXMudm0sdGhpcy52bS4kb3B0aW9ucy5fYmFzZS5vYnNlcnZhYmxlKHZhbHVlKSkgIHh4eHgg5LiN6KGMXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVmKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy52bS4kc2V0KHRoaXMudm0ucm9vdCwga2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlYWN0aXZlKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKCh2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZih2LCB2YWx1ZVt2XSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1c2UoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgbGV0IGNhbGxiYWNrTGlzdCA9IEFycmF5LmlzQXJyYXkoY2FsbGJhY2spID8gY2FsbGJhY2sgOiBbY2FsbGJhY2tdO1xyXG4gICAgICAgICAgICBjYWxsYmFja0xpc3QuZm9yRWFjaChmID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGhvZHMgPSBmLmNhbGwodGhpcy52bSwgdGhpcywgdGhpcy5yb290KTtcclxuICAgICAgICAgICAgICAgIG1ldGhvZHMgJiYgT2JqZWN0LmFzc2lnbih0aGlzLnZtLCBtZXRob2RzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGV4cG9ydHMuVmNvbXBvc2l0aW9uMiA9IFZjb21wb3NpdGlvbjI7XHJcbiAgICBjb25zdCBWMkluaXQgPSAodm1PcHRpb25zKSA9PiB7XHJcbiAgICAgICAgLy8g5L2G5pivdnVl5piv5Zyo5pyJ5a6e5L6L55qE5pe25YCZ5Y675omn6KGM55qEZGF0YVxyXG4gICAgICAgIC8v5Lya57uZZGF0YeS8oOWFpeW9k+WJjeeahHZ1ZeWunuS+iyzogIzmiJHov5nph4zov5jmsqHmnInlrp7kvoss5Lmf5bCx5piv6K+0ZGF0YemHjOeahOWvueixoeS4jeiDveWGmXRoaXNcclxuICAgICAgICBjb25zdCBvcHRpb25zRGF0YSA9IHZtT3B0aW9ucy5kYXRhID8gdm1PcHRpb25zLmRhdGEoKSA6IHt9O1xyXG4gICAgICAgIHZtT3B0aW9ucy5kYXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9uc0RhdGEsXHJcbiAgICAgICAgICAgICAgICByb290OiB7fSxcclxuICAgICAgICAgICAgICAgIGNkOiB7fSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB2bU9wdGlvbnM7XHJcbiAgICB9O1xyXG4gICAgZXhwb3J0cy5WMkluaXQgPSBWMkluaXQ7XHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n')},function(module,exports){eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMgc3luYz9jNTlkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsV0FBVztBQUNsRDtBQUNBO0FBQ0EiLCJmaWxlIjoiMS5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHdlYnBhY2tFbXB0eUNvbnRleHQocmVxKSB7XG5cdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHR0aHJvdyBlO1xufVxud2VicGFja0VtcHR5Q29udGV4dC5rZXlzID0gZnVuY3Rpb24oKSB7IHJldHVybiBbXTsgfTtcbndlYnBhY2tFbXB0eUNvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tFbXB0eUNvbnRleHQ7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tFbXB0eUNvbnRleHQ7XG53ZWJwYWNrRW1wdHlDb250ZXh0LmlkID0gMTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")}])});